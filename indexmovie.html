<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movies</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href ="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <style>
    body {
      background-color: #121212;
      color: #fff;
      font-family: Arial, sans-serif;
    }

    h2, h4 {
      color: #ffc107;
    }

    /* Navbar styles */
    .navbar {
      background-color: #1c1818; /* Đổi màu nền navbar */
      border-radius: 20px; /* Bo tròn các góc của navbar */
      padding: 20px 30px; /* Thêm khoảng cách bên trong navbar */
      font-size: 19px; /* Thay đổi kích thước chữ */
      box-shadow: 0 2px 10px rgba(0,0,0,0.5); /* Thêm bóng đổ cho navbar */
    }

    .navbar-nav .nav-link {
      color: rgb(225, 215, 215) !important;
      margin-right: 10px;
    }
    .navbar-nav .nav-link:hover {
      color: #ffc107 !important;
    }
    .navbar-brand {
      font-size: 24px; /* Thay đổi kích thước chữ cho brand */
      font-weight: bold; /* Làm đậm chữ cho brand */
    }

    .form-control::placeholder {
      color: #e9d9d9;
    }

    .form-control {
      background-color: #565050;
      border: none;
      border-radius: 20px;
    }
    .dropdown-menu {
    background-color: #797171;
    border: none;
    border-radius: 8px;
    margin-top: 10px;
    }

    .dropdown-item {
    color: #fff;
    padding: 10px 15px;
    }

    .dropdown-item:hover {
    background-color: #ffc107;
    color: #ebd0d0;
    }
    /* Hero Section */
    .movie-item {
      background-color: #1e1e1e;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.5);
      transition: transform 0.3s;
    }

    .movie-item:hover {
      transform: scale(1.03);
    }

    .movie-item img {
      width: 100%;
      height: auto;
      object-fit: cover;
    }

    .movie-item .title {
      padding: 10px;
      text-align: center;
    }

    .movie-item .title a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
    }

    .list-items {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    
#hero-section {
  position: relative;
}

#hero-carousel .item {
  position: relative;
  height: 500px;
  color: white;
  background-size: cover;
  background-position: center;
  border-radius: 20px;
  overflow: hidden;
}

#hero-carousel .overlay {
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 20px;
  background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0));
}

#hero-carousel h3 {
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 10px;
}

#hero-carousel p {
  font-size: 16px;
  max-width: 60%;
}
/* Căn chỉnh mũi tên trái/phải cho owl carousel */
/* Căn chỉnh mũi tên trái/phải cho owl carousel */
#hero-carousel .owl-nav {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  transform: translateY(-50%);
  display: flex;
  justify-content: space-between;
  padding: 0 20px;
  pointer-events: none;
}

#hero-carousel .owl-nav button.owl-prev,
#hero-carousel .owl-nav button.owl-next {
  background: transparent !important;
  border: none !important;
  padding: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  pointer-events: auto;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Style icon mũi tên bên trong */
#hero-carousel .owl-prev-icon,
#hero-carousel .owl-next-icon {
  display: inline-block;
  width: 100%;
  height: 100%;
  line-height: 50px;
  border-radius: 50%;
  background-color: rgba(0, 0, 0, 0.6);
  color: white;
  font-size: 26px;
  text-align: center;
  transition: 0.3s ease;
}

/* Hover icon mũi tên */
#hero-carousel .owl-prev-icon:hover,
#hero-carousel .owl-next-icon:hover {
  background-color: rgba(255, 255, 255, 0.9);
  color: black;
}




  </style>
</head>
<body>

<div class="container py-4">

    <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <i class="glyphicon glyphicon-cloud"></i>
      <a class="navbar-brand text-white fw-bold" href="#"> MovieTime</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="#">Home</a>
          </li>

          <!-- Dropdown menu -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="genreDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Genre
            </a>
            <ul class="dropdown-menu" aria-labelledby="genreDropdown" id="genre-menu">
              <!-- JS sẽ thêm thể loại vào đây -->
            </ul>
          </li>             

          <li class="nav-item">
            <a class="nav-link" href="#">TV Series</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="#">Anime</a>
          </li>
        </ul>

        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Search movies..." aria-label="Search" />
          <button class="btn btn-outline-light" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

<!-- Hero Section -->
  <section id="hero-section" class="my-4">
    <div class="owl-carousel owl-theme" id="hero-carousel">
      <!-- Các item phim sẽ được thêm bằng JS -->
    </div>
  </section>  
<!-- Hero Section End -->
 
  <!-- Danh sách phim -->
  <section id="movies-section" class="section">
    <div class="list-items"></div>
  </section>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Owl Carousel CSS & JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/assets/owl.theme.default.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/owl.carousel@2.3.4/dist/owl.carousel.min.js"></script>


<!-- JavaScript xử lý -->
<script>
  const apiKey = '42e8a383317db0a25624e00585d30469';

  const genres = [
    { id: 28, name: "Hành động" },
    { id: 35, name: "Hài hước" },
    { id: 18, name: "Tâm lý" },
    { id: 27, name: "Kinh dị" },
    { id: 10749, name: "Lãng mạn" },
    { id: 16, name: "Hoạt hình" },
    { id: 878, name: "Khoa học viễn tưởng" },
    { id: 12, name: "Phiêu lưu" },
    { id: 53, name: "Hồi hộp" }
  ];

  const genreMenu = document.getElementById('genre-menu');

  genres.forEach(genre => {
    const li = document.createElement('li');
    li.innerHTML = `<a class="dropdown-item" href="#" data-id="${genre.id}">${genre.name}</a>`;
    genreMenu.appendChild(li);
  });

  // Hàm tạo thẻ phim
  function createMediaCard(media, mediaType) {
    const { id, backdrop_path, title, name } = media;
    const movieTitle = title || name || 'Không rõ';

    const card = document.createElement("div");
    card.classList.add("movie-item");

    const imageUrl = backdrop_path
      ? `https://image.tmdb.org/t/p/w500${backdrop_path}`
      : 'https://via.placeholder.com/500x281?text=No+Image';

    card.innerHTML = `
      <img src="${imageUrl}" alt="${movieTitle}">
      <div class="title">
        <a href="watch.html?id=${id}&mediaType=${mediaType}">${movieTitle}</a>
      </div>
    `;
    return card;
  }

  // Hàm fetch phim theo thể loại
  async function fetchMoviesByGenre(genreId) {
    const url = `https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&language=en&with_genres=${genreId}`;
    const response = await fetch(url);
    const data = await response.json();

    const container = document.querySelector("#movies-section .list-items");
    container.innerHTML = '';

    data.results.forEach(movie => {
      const card = createMediaCard(movie, 'movie');
      container.appendChild(card);
    });
  }

  // Lắng nghe chọn thể loại
  genreMenu.addEventListener('click', function (e) {
    if (e.target.classList.contains('dropdown-item')) {
      const genreId = e.target.getAttribute('data-id');
      fetchMoviesByGenre(genreId);
    }
  });

  // Load mặc định thể loại đầu tiên khi mở trang
  fetchMoviesByGenre(genres[0].id);

    // Hàm fetch phim đang chiếu
  async function fetchHeroMovies() {
  const url = `https://api.themoviedb.org/3/movie/now_playing?api_key=${apiKey}&language=en&page=1`;
  const response = await fetch(url);
  const data = await response.json();
  const container = $('#hero-carousel');

  data.results.slice(0, 6).forEach(movie => {
    const bgImage = movie.backdrop_path
      ? `https://image.tmdb.org/t/p/original${movie.backdrop_path}`
      : 'https://via.placeholder.com/1280x720?text=No+Image';

    const item = `
      <div class="item" style="background-image: url('${bgImage}');">
        <div class="overlay">
          <h3>${movie.title}</h3>
          <p>${movie.overview.substring(0, 150)}...</p>
          <a href="watch.html?id=${movie.id}&mediaType=movie" class="btn btn-warning mt-2">Xem ngay</a>
        </div>
      </div>
    `;

    container.append(item);
  });

$('#hero-carousel').owlCarousel({
  items: 1,
  loop: true,
  nav: true,
  dots: false,
  autoplay: true,
  autoplayTimeout: 5000,
  autoplayHoverPause: true,
  navText: [
    "<span class='owl-prev-icon'>&#10094;</span>",  // ‹
    "<span class='owl-next-icon'>&#10095;</span>"   // ›
  ]
});
}
// Gọi khi trang load
$(document).ready(() => {
  fetchHeroMovies();
});
</script>

</body>
</html>
